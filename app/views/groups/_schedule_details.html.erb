<%# グループ詳細ページの日程（表示と編集）しおりが作成されていると表示される %>
<% if schedule.present? %>
  <%# スケジュール詳細セクション（表示/編集を切り替え） %>
  <div id="schedule-details-section" data-controller="memo-edit" class="w-full mb-6 lg:mb-8">
    <%# 表示モード %>
    <div id="schedule-details-display" data-memo-edit-target="display" class="<%= 'hidden' if schedule.errors.any? %>">
      <%= form_with model: schedule, class: "w-full" do |f| %>
        <div class="flex gap-4 md:gap-6">
          <%# 開始日 %>
          <div class="flex-1 mb-4 md:mb-6 cursor-pointer">
            <%= f.label :start_date, t('groups.form.start_date'), class: "block text-sm lg:text-base font-medium text-text mb-2 lg:mb-3" %>
            <%= f.date_field :start_date, readonly: true, class: "form-text-field bg-gray-100 cursor-pointer w-full text-sm lg:text-base", data: { action: "click->memo-edit#toggleForm" } %>
          </div>
          <%# 終了日 %>
          <div class="flex-1 mb-4 md:mb-6 cursor-pointer">
            <%= f.label :end_date, t('groups.form.end_date'), class: "block text-sm lg:text-base font-medium text-text mb-2 lg:mb-3" %>
            <%= f.date_field :end_date, readonly: true, class: "form-text-field bg-gray-100 cursor-pointer w-full text-sm lg:text-base", data: { action: "click->memo-edit#toggleForm" } %>
          </div>
        </div>
      <% end %>
    </div>

    <%# 編集モード（非表示） %>
    <div id="schedule-details-form" data-memo-edit-target="form" class="<%= 'hidden' unless schedule.errors.any? %>">
      <%= form_with model: [group, schedule], local: true do |f| %>
        <%# schedulesコントローラで更新時の遷移先を分けるためにfrom_pageを定義している %>
        <%= f.hidden_field :from_page, value: "show" %>
        <div class="flex  gap-4 md:gap-6">
          <%# 開始日 %>
          <div class="flex-1">
            <%= f.label :start_date, t('groups.form.start_date'), class: "block text-sm lg:text-base font-medium text-text mb-2 lg:mb-3" %>
            <%= f.date_field :start_date, class: "form-text-field w-full text-sm lg:text-base" %>
          </div>
          <%# 終了日 %>
          <div class="flex-1">
            <%= f.label :end_date, t('groups.form.end_date'), class: "block text-sm lg:text-base font-medium text-text mb-2 lg:mb-3" %>
            <%= f.date_field :end_date, class: "form-text-field w-full text-sm lg:text-base" %>
          </div>
        </div>
        <%# エラーメッセージ表示 %>
        <% if schedule.errors.any? %>
          <div class="mt-2 lg:mt-3">
            <% schedule.errors.messages[:start_date]&.each do |message| %>
              <p class="text-red-600 text-xs lg:text-sm"><%= t('activerecord.attributes.schedule.start_date') %><%= message %></p>
            <% end %>
            <% schedule.errors.messages[:end_date]&.each do |message| %>
              <p class="text-red-600 text-xs lg:text-sm"><%= t('activerecord.attributes.schedule.end_date') %><%= message %></p>
            <% end %>
          </div>
        <% end %>
        <%# ボタン %>
        <div class="flex gap-2 mt-3 lg:mt-4 mb-6 lg:mb-8 justify-end">
          <%= f.submit t('groups.form.update'), class: "btn-main px-4 lg:px-6 py-2 w-auto text-sm lg:text-base" %>
          <button type="button" class="btn-sub px-4 lg:px-6 py-2 w-auto" data-action="click->memo-edit#toggleForm">
            ×
          </button>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
