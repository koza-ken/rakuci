<!-- スケジュール詳細セクションを更新 -->
<%= turbo_stream.replace "schedule-details-section" do %>
  <div id="schedule-details-section" data-controller="memo-edit" class="w-full">
    <!-- 表示モード -->
    <div id="schedule-details-display" data-memo-edit-target="display" class="<%= 'hidden' if @schedule.errors.any? %>">
      <%= form_with model: @schedule, class: "w-full" do |f| %>
        <div class="flex gap-6">
          <%# 開始日 %>
          <div class="mb-6 cursor-pointer">
            <%= f.label :start_date, t('groups.form.start_date'), class: "block text-sm font-medium text-text mb-2" %>
            <%= f.date_field :start_date, readonly: true, class: "form-text-field bg-gray-100 cursor-pointer", data: { action: "click->memo-edit#toggleForm" } %>
          </div>
          <%# 終了日 %>
          <div class="mb-6 cursor-pointer">
            <%= f.label :end_date, t('groups.form.end_date'), class: "block text-sm font-medium text-text mb-2" %>
            <%= f.date_field :end_date, readonly: true, class: "form-text-field bg-gray-100 cursor-pointer", data: { action: "click->memo-edit#toggleForm" } %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- 編集モード（非表示） -->
    <div id="schedule-details-form" data-memo-edit-target="form" class="<%= 'hidden' unless @schedule.errors.any? %>">
      <%= form_with model: [@group, @schedule], local: true do |f| %>
        <div class="flex gap-6">
          <%# 開始日 %>
          <div class="flex-1">
            <%= f.label :start_date, t('groups.form.start_date'), class: "block text-sm font-medium text-text mb-2" %>
            <%= f.date_field :start_date, class: "form-text-field w-full" %>
          </div>
          <%# 終了日 %>
          <div class="flex-1">
            <%= f.label :end_date, t('groups.form.end_date'), class: "block text-sm font-medium text-text mb-2" %>
            <%= f.date_field :end_date, class: "form-text-field w-full" %>
          </div>
        </div>
        <!-- ボタン -->
        <div class="flex gap-2 mt-2">
          <%= f.submit t('groups.form.update'), class: "btn-main px-4 py-2 w-auto" %>
          <button type="button" class="btn-sub px-4 py-2 w-auto" data-action="click->memo-edit#toggleForm">
            <%= t('groups.form.cancel') %>
          </button>
        </div>
        <!-- エラーメッセージ表示 -->
        <% if @schedule.errors.any? %>
          <div class="mt-2">
            <% @schedule.errors.messages[:start_date]&.each do |message| %>
              <p class="text-red-600 text-sm"><%= message %></p>
            <% end %>
            <% @schedule.errors.messages[:end_date]&.each do |message| %>
              <p class="text-red-600 text-sm"><%= message %></p>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
