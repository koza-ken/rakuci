<%= link_to (card.group_card? ? group_card_path(card.group, card) : card_path(card)), class: "block w-[170px] mx-auto" do %>
  <div id="<%= dom_id(card) %>" class="relative w-full aspect-[1/1.4] rounded-lg shadow-[2px_2px_6px_rgba(0,0,0,0.25)]
              px-2 py-2 border-[6px] border-[#ecebe8] bg-[#fffee7] overflow-hidden
              before:absolute before:inset-0 before:z-10
              before:bg-[radial-gradient(circle_at_top_left,rgba(255,255,255,0.45)_0%,rgba(255,255,255,0)_70%)]
              before:opacity-50 before:mix-blend-screen before:pointer-events-none
              after:absolute after:inset-0 after:z-0
              <%# カードのモヤ（いらない気がする） %>
              <%# after:bg-[url('/assets/fresh-snow.png')] %>
              after:opacity-40 after:brightness-70 after:mix-blend-multiply after:pointer-events-none">

    <%# 上部 %>
    <div class="flex justify-between items-center pb-2 relative z-10">
      <h2 class="font-bold text-card-title truncate text-lg ml-2">
        <%= card.name %>
      </h2>
    </div>

    <%# カテゴリごとのスポット件数 %>
    <div class="p-1 pr-3 text-sm relative z-10 space-y-1">
      <% Category.order(:display_order).limit(4).each do |category| %>
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-2">
            <% if category.icon_partial.present? %>
              <span class="w-5 h-5 flex items-center justify-center text-orange-400">
                <%= render category.icon_partial %>
              </span>
            <% end %>
            <p class="text-text-light"><%= category.name %></p>
          </div>
          <p class="text-text-light"><%= spots_count_for_category(spots_by_category, category) %></p>
        </div>
      <% end %>
    </div>

    <%# 作成日・最終更新日・いいね %>
    <div class="mt-3 mb-1 ml-2 text-sm text-text-light relative z-10 flex justify-between items-end">
      <div class="space-y-2">
        <p>作成日 : <%= card.created_at.strftime("%Y/%m/%d") %></p>
        <p>更新日 : <%= card.updated_at.strftime("%Y/%m/%d") %></p>
      </div>
    </div>
    <% if card.group_card? %>
      <div class="flex justify-end mr-2" onclick="event.stopPropagation(); event.preventDefault();">
        <%= render "likes/like_button", card: card %>
      </div>
    <% end %>
  </div>
<% end %>
