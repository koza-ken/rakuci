<%# item1個の表示フォーム %>
<div id="item_<%= item.id %>" class="flex items-center gap-2" data-controller="item-edit" data-item-edit-target="itemRow">
  <%# ドラッグハンドル（並び替え用） %>
  <div class="drag-handle flex items-center justify-center w-8 text-text-light cursor-grab active:cursor-grabbing" data-sortable-handle>
    <span class="text-xl leading-none">⋮⋮</span>
  </div>

  <%# チェックボックス %>
  <input
    type="checkbox"
    id="item_<%= item.id %>_checked"
    <%= 'checked' if item.checked %>
    data-action="change->item-edit#toggleCheck"
    data-item-edit-target="checkbox"
    class="w-4 h-4 cursor-pointer"
  />

  <%# アイテム名（表示モード） %>
  <div
    id="item_<%= item.id %>_display"
    class="flex-1 text-text cursor-pointer hover:bg-gray-100 px-2 py-1 rounded"
    data-action="click->item-edit#toggleEditForm"
    data-item-edit-target="display"
  >
    <span class="<%= 'line-through opacity-50' if item.checked %>">
      <%= item.name %>
    </span>
  </div>

  <%# アイテム名（編集モード） %>
  <div id="item_<%= item.id %>_form" class="hidden flex-1" data-item-edit-target="editForm">
    <input
      type="text"
      value="<%= item.name %>"
      class="form-text-field flex-1 text-sm py-1"
      autofocus
      data-action="blur->item-edit#saveItem"
      data-item-edit-target="nameInput"
    />
  </div>

  <%# 削除ボタン %>
  <%= button_to item_list_item_path(item), method: :delete, form: { class: "inline" } do %>
    <span class="text-xl cursor-pointer pr-2">×</span>
  <% end %>
</div>
